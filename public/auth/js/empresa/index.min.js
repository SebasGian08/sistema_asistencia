var $dataTableEmpresa,$dataTable;$((function(){const $table=$("#tableEmpresa");function invocarModalView(id){invocarModal(`/auth/empresa/partialView/${id||0}`,(function($modal){"true"===$modal.attr("data-reload")&&$dataTableEmpresa.ajax.reload(null,!1)}))}$dataTableEmpresa=$table.DataTable({stripeClasses:["odd-row","even-row"],lengthChange:!0,lengthMenu:[[50,100,200,500,-1],[50,100,200,500,"Todo"]],info:!1,ajax:{url:"/auth/empresa/list_all"},columns:[{title:"ID",data:"id",className:"text-center"},{title:"Fecha de Registro",data:"created_at",render:function(data){return null!=data?moment(data).format("DD-MM-YYYY"):"-"}},{title:"RUC",data:"ruc"},{title:"Razón Social",data:"razon_social"},{title:"Nombre Comercial",data:"nombre_comercial",class:"hidden"},{title:"Departamento",data:"provincias.nombre",class:"hidden",render:function(data){return data||"-"}},{title:"Ciudad",data:"distritos.nombre",class:"hidden",render:function(data){return data||"-"}},{title:"Dirección",data:"direccion",class:"hidden"},{title:"Teléfono",data:"telefono"},{title:"E-mail",data:"email"},{title:"Nombre Contacto",data:"nombre_contacto"},{title:"Apellido Contacto",data:"apellido_contacto",class:"hidden"},{title:"Cargo Contacto",data:"cargo_contacto",class:"hidden"},{title:"Teléfono Contacto",data:"telefono_contacto",class:"hidden"},{data:null,defaultContent:"<button type='button' class='btn btn-secondary btn-xs btn-update' data-toggle='tooltip' title='Ver'><i class='fa fa-eye'></i></button>",orderable:!1,searchable:!1,width:"26px"},{data:null,render:function(data){return data.aprobado==ESTADOS.CANCELADO?"<button type='button' class='btn btn-success btn-xs btn-approved' data-toggle='tooltip' title='Aprobar'><i class='fa fa-check'></i></button>":""},orderable:!1,searchable:!1,width:"26px"},{data:null,render:function(data){return data.aprobado==ESTADOS.APROBADO?"<button type='button' class='btn btn-warning btn-xs btn-cancel' data-toggle='tooltip' title='Dar de baja'><i class='fa fa-ban'></i></button>":""},orderable:!1,searchable:!1,width:"26px"},{data:null,defaultContent:"<button type='button' class='btn btn-danger btn-xs btn-delete' data-toggle='tooltip' title='Eliminar'><i class='fa fa-trash'></i></button>",orderable:!1,searchable:!1,width:"26px"}]}),$table.on("click",".btn-update",(function(){const id=$dataTableEmpresa.row($(this).parents("tr")).data().id;invocarModalView(id)})),$table.on("click",".btn-cancel",(function(){const id=$dataTableEmpresa.row($(this).parents("tr")).data().id,formData=new FormData;formData.append("_token",$("input[name=_token]").val()),formData.append("id",id),formData.append("update_id",ESTADOS.CANCELADO),confirmAjax("/auth/empresa/update",formData,"POST",null,null,(function(){$dataTableEmpresa.ajax.reload(null,!1)}))})),$table.on("click",".btn-approved",(function(){const id=$dataTableEmpresa.row($(this).parents("tr")).data().id,formData=new FormData;formData.append("_token",$("input[name=_token]").val()),formData.append("id",id),formData.append("update_id",ESTADOS.APROBADO),confirmAjax("/auth/empresa/update",formData,"POST",null,null,(function(){$dataTableEmpresa.ajax.reload(null,!1)}))})),$table.on("click",".btn-delete",(function(){const id=$dataTableEmpresa.row($(this).parents("tr")).data().id,formData=new FormData;formData.append("_token",$("input[name=_token]").val()),formData.append("id",id),confirmAjax("/auth/empresa/delete",formData,"POST",null,null,(function(){$dataTableEmpresa.ajax.reload(null,!1)}))})),$("#modalRegistrarEmpresa").on("click",(function(){invocarModalView()}))}));